package com.bootcamp.services;

import com.bootcamp.client.ProjetClient;
import com.bootcamp.client.SecteurClient;
import com.bootcamp.commons.ws.usecases.pivotone.SecteurWS;
import com.bootcamp.entities.Projet;
import com.bootcamp.entities.Secteur;
import com.bootcamp.helpers.SecteurHelper;
import org.springframework.stereotype.Component;

import javax.annotation.PostConstruct;
import java.io.IOException;
import java.util.List;

/**
 * Created by darextossa on 11/29/17.
 */

@Component
public class SecteurService {

    SecteurClient secteurClient;
    ProjetClient projetClient;
    SecteurHelper secteurHelper = new SecteurHelper();

    @PostConstruct
    public void init(){
        secteurClient = new SecteurClient();
        projetClient = new ProjetClient();
    }

    public List<SecteurWS> getSecteur() throws IOException {
        List<Secteur> secteurList = secteurClient.findAll();
        List<Projet> projetList = projetClient.findAll();
        List<SecteurWS> secteurWSS = secteurHelper.buildSecteurWSList(secteurList, projetList);

        return secteurWSS;
    }

    public SecteurWS getSecteur(int axeId) throws IOException{
        Secteur secteur= secteurClient.getById(axeId);
        List<Projet> projetList = projetClient.findAll();
        SecteurWS secteurWS = secteurHelper.buildSecteurWsObject(secteur,projetList,false);
        return secteurWS;
    }
}
